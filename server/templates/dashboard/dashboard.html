{% extends 'base.html' %}

{% block header %}
  <!-- <h1>{% block title %}Dashboard{% endblock %}</h1> -->
{% endblock %}

{% block content %}
<div class="card mt-5">
    <div class="card-header p-3 bg-secondary bg-gradient">
        <h3> My Dashboard </h3>
    </div>
    <div class="card-body">
        <div class="row mt-5">
            <div class="col-sm-12 col-md-6 col-lg-6 mb-4">
                <!-- appointments -->
                <div class="card mx-4-md mx-4-lg">
                    <div class="card-header">
                        <h4>
                            Appointments
                            <span class="float-end dropdown">
                                <button class="btn btn-border-secondary btn" type="button" id="appointments" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="appointments">
                                    <li><a class="dropdown-item" href="{{ url_for('book_appointment') }}"> Book </a></li>
                                    <li><a class="dropdown-item" href="{{ url_for('cancel_appointment') }}"> Cancel </a></li>
                                    <li><a class="dropdown-item" href="{{ url_for('get_appointments') }}"> View all </a></li>
                                </ul>
                            </span>
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive app">
                            <table class="table table-light table-hover">
                                <tr>
                                    <th>Doctor</th>
                                    <th>Date</th> 
                                    <th>Time</th>
                                    <th>Complaint</th>
                                </tr>
                                {% for appo in data['appointments'] %}
                                    <tr>
                                        <td>{{ appo['name'] }}</td>
                                        <td>{{ appo['dat'] }}</td>
                                        <td>{{ appo['start_time'] }}</td>
                                        {% if appo['complaint'] %}
                                            <td>{{ appo['complaint'] }}</td>
                                        {% else %}
                                            <td> None </td>
                                        {% endif %}
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 mb-4">
                <!-- bills -->
                <div class="card mx-4-md mx-4-lg">
                    <div class="card-header">
                        <h4>
                            Bills
                            <span class="float-end dropdown">
                                <button class="btn btn-border-secondary btn" type="button" id="bills" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="bills">
                                    <li><a class="dropdown-item" href="{{ url_for('book_appointment') }}"> Pay </a></li>
                                    <li><a class="dropdown-item" href="{{ url_for('cancel_appointment') }}"> View all </a></li>
                                </ul>
                            </span>
                        </h4>
                    </div>
                    <div class="card-body">    
                        <div class="table-responsive app">
                            <table class="table table-light table-hover">
                                <tr>
                                    <th>Purpose</th>
                                    <th>Charges</th> 
                                    <th>Discount</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                </tr>
                                {% for bill in data['bills'] %}
                                    <tr>
                                        <td>{{ bill['purpose'] }}</td>
                                        <td>{{ bill['net_charges'] }}</td>
                                        <td>{{ bill['discount'] }}</td>
                                        <td>{{ bill['status'] }}</td>
                                        <td>{{ bill['dat'] }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 mb-4">
                <!-- tests -->
                <div class="card mx-4-md mx-4-lg">
                    <div class="card-header">
                        <h4>
                            Tests
                            <span class="float-end dropdown">
                                <button class="btn btn-border-secondary btn" type="button" id="tests" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="tests">
                                    <li><a class="dropdown-item" href="{{ url_for('cancel_appointment') }}"> View all </a></li>
                                </ul>
                            </span>
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive app">
                            <table class="table table-light table-hover">
                                <tr>
                                    <th>Name</th>
                                    <th>Results</th> 
                                    <th>Comments</th>
                                    <th>Date</th>
                                </tr>
                                {% for test in data['tests'] %}
                                    <tr>
                                        <td>{{ test['test'] }}</td>
                                        <td>{{ test['result_file'] }}</td>
                                        <td>{{ test['comments'] }}</td>
                                        <td>{{ test['dat'] }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-6 mb-4">
                <!-- history -->
                <div class="card mx-4-md mx-4-lg">
                    <div class="card-header">
                        <h4>
                            History
                            <span class="float-end dropdown">
                                <button class="btn btn-border-secondary btn" type="button" id="history" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="history">
                                    <li><a class="dropdown-item" href="{{ url_for('cancel_appointment') }}"> View all </a></li>
                                </ul>
                            </span>
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive app">
                            <table class="table table-light table-hover">
                                <tr>
                                    <th>Disease</th>
                                    <th>Date</th> 
                                </tr>
                                {% for record in data['history'] %}
                                    <tr>
                                        <td>{{ record['name'] }}</td>
                                        <td>{{ record['detected'] }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
