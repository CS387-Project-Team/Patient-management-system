{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Dashboard{% endblock %}</h1>
{% endblock %}

{% block content %}
<div class="cards">
    <div class="card">
        <!-- appointments -->
        <!-- vertical ellipsis https://stackoverflow.com/questions/30260195/how-to-make-3-vertical-dots-using-css/30266001 -->
        <!-- dropdown https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_dropdown-menu&stacked=h -->

        <div class="header">
            <h3>Appointments</h3>
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle icons" type="button" data-toggle="dropdown">
                    Actions
                    <span class="caret"></span>
                    <!-- <li></li>
                    <li></li>
                    <li></li>     -->
                </button>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('book_appointment') }}"> Book </a></li>
                    <li><a href="{{ url_for('cancel_appointment') }}"> Cancel </a></li>
                    <li><a href="{{ url_for('cancel_appointment') }}"> View all </a></li>
                </ul>
            </div>
        </div>
        <table style="width:100%">
            <tr>
                <th>Doctor</th>
                <th>Date</th> 
                <th>Time</th>
                <th>Complaint</th>
            </tr>
            {% for appo in data['appointments'] %}
                <tr>
                    <td>{{ appo['name'] }}</td>
                    <td>{{ appo['dat'] }}</td>
                    <td>{{ appo['start_time'] }}</td>
                    {% if appo['complaint'] %}
                        <td>{{ appo['complaint'] }}</td>
                    {% else %}
                        <td> None </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </table>
        <!-- <ul style="list-style-type: none;">
            <li><a href="{{ url_for('book_appointment') }}"> Book </a></li>
            <li><a href="{{ url_for('cancel_appointment') }}"> Cancel </a></li>
            <li><a href="{{ url_for('cancel_appointment') }}"> View all </a></li>
        </ul> -->
    </div>
    <div class="card">
        <!-- bills -->
        <h3>Bills</h3>
        <table style="width:100%">
            <tr>
                <th>Purpose</th>
                <th>Charges</th> 
                <th>Discount</th>
                <th>Status</th>
                <th>Date</th>
            </tr>
            {% for bill in data['bills'] %}
                <tr>
                    <td>{{ bill['purpose'] }}</td>
                    <td>{{ bill['net_charges'] }}</td>
                    <td>{{ bill['discount'] }}</td>
                    <td>{{ bill['status'] }}</td>
                    <td>{{ bill['dat'] }}</td>
                </tr>
            {% endfor %}
        </table>
        <ul style="list-style-type: none;">
            <li><a href="{{ url_for('book_appointment') }}"> Pay </a></li>
            <li><a href="{{ url_for('cancel_appointment') }}"> View all </a></li>
        </ul>
    </div>
    <div class="card">
        <!-- tests -->
        <h3>Tests</h3>
        <table style="width:100%">
            <tr>
                <th>Name</th>
                <th>Results</th> 
                <th>Comments</th>
                <th>Date</th>
            </tr>
            {% for test in data['tests'] %}
                <tr>
                    <td>{{ test['test'] }}</td>
                    <td>{{ test['result_file'] }}</td>
                    <td>{{ test['comments'] }}</td>
                    <td>{{ test['dat'] }}</td>
                </tr>
            {% endfor %}
        </table>
        <ul style="list-style-type: none;">
            <li><a href="{{ url_for('cancel_appointment') }}"> View all </a></li>
        </ul>
    </div>
    <div class="card">
        <!-- history -->
        <h3>History</h3>
        <table style="width:100%">
            <tr>
                <th>Disease</th>
                <th>Date</th> 
            </tr>
            {% for record in data['history'] %}
                <tr>
                    <td>{{ record['name'] }}</td>
                    <td>{{ record['detected'] }}</td>
                </tr>
            {% endfor %}
        </table>
        <ul style="list-style-type: none;">
            <li><a href="{{ url_for('cancel_appointment') }}"> View all </a></li>
        </ul>
    </div>
</div>
{% endblock %}
